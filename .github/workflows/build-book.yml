on: workflow_dispatch
#on:
#  workflow_dispatch:
#    inputs:
#      tags:
#        description: 'Test scenario tags'
#        required: false
#        type: boolean

jobs:
  build-resume:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

#get latex tools
    - run: sudo apt -y update
    - run: sudo apt -y install texlive-latex-base texlive-fonts-recommended texlive-latex-extra
#    - run: sudo apt -y install texlive-fonts-extra
    - run: sudo apt -y install texlive-lang-cyrillic
#get python and needed libs
    - uses: actions/setup-python@v4
      with:
        python-version: "3.10"
        cache: 'pip'
    - run: python -m pip install --upgrade pip
    - run: pip install -r scripts/requirements.txt

#double run to get proper table of contents
    - run: mkdir output
    - run: pdflatex --enable-pipes --shell-escape -output-directory=output ./Threads-of-Fate.tex
    - run: pdflatex --enable-pipes --shell-escape -output-directory=output ./Threads-of-Fate.tex
